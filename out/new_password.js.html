<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>JSDoc: Source: new_password.js</title>

  <script src="scripts/prettify/prettify.js"> </script>
  <script src="scripts/prettify/lang-css.js"> </script>
  <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
  <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

  <div id="main">

    <h1 class="page-title">Source: new_password.js</h1>






    <section>
      <article>
        <pre class="prettyprint source linenums"><code>users = [];

/**
 * This function initilizes the password page
 */
async function initPassword() {
  init();
  users = jsonFromServer["users"];
  getParameter();
}

/**
 * This function gets the parameter of the url in the email
 */
function getParameter() {
  var urlParams = new URLSearchParams(window.location.search);
  var email = urlParams.get("email");
  var decodedEmail = decodeURIComponent(email);
  localStorage.setItem("email", decodedEmail);
}

/** 
 * This function gets the new password out of the inputs
 */
function createNewPassword() {
  let password1 = document.getElementById("newPassword1").value;
  let password2 = document.getElementById("newPassword2").value;

  if (password1 === password2) {
    setNewPassword(password1);
  } else {
    wrongPassword();
  }
}


/**
 * This function sets the new password and pushes it into the json
 * 
 * @param {*} password1 The new password
 */
async function setNewPassword(password1) {
  for (let i = 0; i &lt; users.length; i++) {
    if (users[i]["email"] === localStorage.email) {
      users[i]["password"] = password1;
      await saveJSONToServer();
      correctPassword();
    }
  }
}


/**
 * This function redirects to the login site if the new password was similar in both inputs
 */
function correctPassword() {
  document.getElementById("loginContainer").innerHTML += `
        &lt;div id="blueAlert" class="blue-alert">Your password has been successfully changed. In a few seconds, you will be redirected to the login page!&lt;/div>
    `;
  setTimeout(function () {
    location.href = "login.html";
    document.getElementById("blueAlert").classList.add("d-none");
  }, 3000);
}


/**
 * This function says that the new password was not similar in both inputs.
 */
function wrongPassword() {
  document.getElementById("loginContainer").innerHTML += `
    &lt;div id="redAlert" class="red-alert">Deine Passwörter stimmen nicht überein. Bitte versuche es erneut!&lt;/div>
`;
  setTimeout(function () {
    document.getElementById("redAlert").classList.add("d-none");
  }, 3000);
}
</code></pre>
      </article>
    </section>




  </div>

  <nav>
    <h2><a href="index.html">Home</a></h2>
    <h3>Global</h3>
    <h3><b>new_password.js</b></h3>
    <ul class="overflowContainer>
      <li><a href=" global.html#animateResponsiveGreeting">animateResponsiveGreeting</a></li>
      <li><a href="global.html#chooseProfilePicture">chooseProfilePicture</a></li>
      <li><a href="global.html#correctPassword">correctPassword</a></li>
      <li><a href="global.html#createNewPassword">createNewPassword</a></li>
      <li><a href="global.html#fillInClosestDate">fillInClosestDate</a></li>
      <li><a href="global.html#findClosestDate">findClosestDate</a></li>
      <li><a href="global.html#getParameter">getParameter</a></li>
      <li><a href="global.html#greetingTime">greetingTime</a></li>
      <li><a href="global.html#initPassword">initPassword</a></li>
      <li><a href="global.html#initSummary">initSummary</a></li>
      <li><a href="global.html#loadJSONFromServer">loadJSONFromServer</a></li>
      <li><a href="global.html#loadTasks">loadTasks</a></li>
      <li><a href="global.html#openBoard">openBoard</a></li>
      <li><a href="global.html#openSelectProfile">openSelectProfile</a></li>
      <li><a href="global.html#responsiveGreeting">responsiveGreeting</a></li>
      <li><a href="global.html#saveCurrentUser">saveCurrentUser</a></li>
      <li><a href="global.html#saveJSONToServer">saveJSONToServer</a></li>
      <li><a href="global.html#setGreetingName">setGreetingName</a></li>
      <li><a href="global.html#setNewPassword">setNewPassword</a></li>
      <li><a href="global.html#setProfilePicture">setProfilePicture</a></li>
      <li><a href="global.html#showAwaitingFeedback">showAwaitingFeedback</a></li>
      <li><a href="global.html#showDone">showDone</a></li>
      <li><a href="global.html#showTasksInBoard">showTasksInBoard</a></li>
      <li><a href="global.html#showTasksInProgress">showTasksInProgress</a></li>
      <li><a href="global.html#showTodos">showTodos</a></li>
      <li><a href="global.html#showUrgentTasks">showUrgentTasks</a></li>
      <li><a href="global.html#wrongPassword">wrongPassword</a></li>
    </ul>
  </nav>

  <br class="clear">

  <footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Mon Jun 05 2023 15:43:28
    GMT+0200 (Mitteleuropäische Sommerzeit)
  </footer>

  <script> prettyPrint(); </script>
  <script src="scripts/linenumber.js"> </script>
</body>

</html>